# VulnerabilitySearch

#### Installations:
Make a python virtual environment and install dependencies by executing:

```
pip install -r requirements.txt
```

#### Usage:
The extensive arguments are provided in the `config/cve.yaml` file which is used in conjunction with the `main.py` file to demonstrate how to use the code.

However, a working minimalistic code example is given below:

```python
from data.cve import CVEDataset
from index import HFSTIndex

# download and prepare the CVE data modified between a date range
dataset = CVEDataset(
    lastModStartDate="2023-07-01",
    lastModEndDate="2023-07-31",
)

# create a semantically searchable index called "embeddings" on the "descriptions" field
data_index = HFSTIndex(
    dataset, 
    index_encoder="all-mpnet-base-v2", 
    index_src_col="descriptions", 
    index_col_name="embeddings", 
)

# queries are strings or a list of strings
queries = [
    "injection vulnerability allowing attackers to execute arbitrary commands",
    "allowing attackers to invoke exposed public JIRA methods",
]

# default index score is L2 distance, hence lower means closer
searches, scores = data_index.semantic_search(queries, k=10)
```

Current search index is built based on [pre-trained sentence-transformers](https://www.sbert.net/docs/pretrained_models.html). Important to keep search performance vs context length in mind, e.g. `all-mpnet-base-v2` is best performing in terms of semantic search but has only `384` tokens as context length. `all-distilroberta-v1` can be used with an increased context length of `512` tokens but with slight drop in search performance.